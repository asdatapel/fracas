#version 330 core
out vec4 FragColor;

uniform sampler2D base;
uniform sampler2D bloom;
uniform float exposure;

in vec2 frag_uv;

void main()
{
    vec3 hdr_color = texture(base, frag_uv).rgb;
    vec3 bloom_color = texture(bloom, frag_uv).rgb;
    vec3 color = mix(hdr_color, bloom_color, 0.1);

    //tonemap
    color = vec3(1.0) - exp(-color * exposure);

    // gamma correct
    color = pow(color, vec3(1.0/2.2)); 

    FragColor = vec4(color, 1);
} 